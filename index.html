<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Brandon's Training App</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Inter', sans-serif; background: #0a0a0a; color: #e5e5e5; min-height: 100vh; }
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: #1a1a1a; }
  ::-webkit-scrollbar-thumb { background: #f59e0b; border-radius: 3px; }

  .fade-in { animation: fadeIn 0.3s ease-in; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
  @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

  .btn { cursor: pointer; border: none; border-radius: 12px; font-family: 'Inter', sans-serif; font-weight: 600; transition: all 0.2s; }
  .btn:hover { transform: translateY(-1px); }
  .btn:active { transform: translateY(0); }

  .card { background: #1a1a1a; border-radius: 16px; border: 1px solid #2a2a2a; }

  input[type="number"] {
    background: #2a2a2a; border: 1px solid #3a3a3a; color: #fff; border-radius: 8px;
    padding: 8px 12px; font-family: 'Inter', sans-serif; font-size: 14px; width: 80px; text-align: center;
  }
  input[type="number"]:focus { outline: none; border-color: #f59e0b; }

  .exercise-card { transition: all 0.2s; }
  .exercise-card:hover { border-color: #f59e0b44; }

  .timer-ring { transition: stroke-dashoffset 1s linear; }

  .video-btn {
    display: inline-flex; align-items: center; gap: 6px; background: #dc262622;
    color: #ef4444; border: 1px solid #ef444433; border-radius: 8px; padding: 6px 12px;
    font-size: 12px; font-weight: 600; cursor: pointer; transition: all 0.2s; text-decoration: none;
  }
  .video-btn:hover { background: #dc262644; border-color: #ef4444; color: #fff; }

  .tab-btn {
    padding: 10px 20px; border-radius: 10px; font-size: 14px; font-weight: 600;
    cursor: pointer; transition: all 0.2s; border: 1px solid transparent; background: transparent; color: #888;
  }
  .tab-btn.active { background: #f59e0b; color: #000; }
  .tab-btn:hover:not(.active) { color: #fff; background: #2a2a2a; }

  .progress-bar { height: 6px; background: #2a2a2a; border-radius: 3px; overflow: hidden; }
  .progress-fill { height: 100%; background: linear-gradient(90deg, #f59e0b, #f97316); border-radius: 3px; transition: width 0.5s ease; }

  .set-btn {
    width: 44px; height: 44px; border-radius: 10px; display: flex; align-items: center; justify-content: center;
    font-weight: 700; font-size: 14px; cursor: pointer; transition: all 0.2s; border: 2px solid;
  }
  .set-btn.done { background: #16a34a22; border-color: #16a34a; color: #22c55e; }
  .set-btn.pending { background: #2a2a2a; border-color: #3a3a3a; color: #888; }
  .set-btn.pending:hover { border-color: #f59e0b; color: #f59e0b; }

  .weight-log-entry { animation: slideUp 0.3s ease; }

  @media (max-width: 640px) {
    .exercise-header { flex-direction: column; align-items: flex-start !important; gap: 8px; }
  }
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useRef, useCallback } = React;

// Exercise Data
const EXERCISES = {
  dayA: {
    name: "Day A - Pull & Glutes",
    warmup: "5 min light cardio + dynamic stretching",
    exercises: [
      {
        id: "seated-row",
        name: "Seated Cable Row (High Bar)",
        sets: 4, reps: 12, weight: 15, unit: "kg",
        rest: 90,
        video: "https://www.youtube.com/results?search_query=seated+cable+row+proper+form+tutorial",
        tips: "Keep your chest up, squeeze shoulder blades at the top. Control the eccentric.",
        muscles: ["Back", "Biceps"]
      },
      {
        id: "hip-thrust",
        name: "Hip Thrust",
        sets: 3, reps: 12, weight: 15, unit: "kg",
        rest: 90,
        video: "https://www.youtube.com/results?search_query=barbell+hip+thrust+proper+form",
        tips: "Drive through heels, squeeze glutes at the top. Chin tucked, don't hyperextend.",
        muscles: ["Glutes", "Hamstrings"]
      },
      {
        id: "incline-lateral",
        name: "Incline Lateral Raises",
        sets: 3, reps: 12, weight: 7.5, unit: "kg",
        rest: 60,
        video: "https://www.youtube.com/results?search_query=incline+dumbbell+lateral+raise+tutorial",
        tips: "Lie on an incline bench, raise dumbbells to shoulder height. Slow and controlled.",
        muscles: ["Shoulders"]
      },
      {
        id: "floor-bridge",
        name: "Floor Hamstring Bridge",
        sets: 3, reps: 12, weight: 17.5, unit: "kg",
        rest: 60,
        video: "https://www.youtube.com/results?search_query=weighted+glute+bridge+floor+hamstring",
        tips: "Place weight on hips, drive through heels. Focus on hamstring contraction.",
        muscles: ["Hamstrings", "Glutes"]
      },
      {
        id: "bicep-curls",
        name: "Bicep Curls (10-10\" Tempo)",
        sets: 3, reps: 10, weight: 7.5, unit: "kg",
        rest: 60,
        video: "https://www.youtube.com/results?search_query=slow+tempo+bicep+curl+tutorial",
        tips: "10 seconds up, 10 seconds down. Maximum time under tension. Keep elbows pinned.",
        muscles: ["Biceps"]
      }
    ],
    finisher: {
      name: "Cardio Finisher",
      rounds: 4,
      exercises: ["Jumping Jacks (30s)", "High Knees (30s)"],
      video: "https://www.youtube.com/results?search_query=jumping+jacks+high+knees+cardio+finisher"
    }
  },
  dayB: {
    name: "Day B - Squat & Press",
    warmup: "5 min light cardio + dynamic stretching",
    exercises: [
      {
        id: "back-squat",
        name: "Back Squat",
        sets: 4, reps: 10, weight: 20, unit: "kg",
        rest: 120,
        video: "https://www.youtube.com/results?search_query=barbell+back+squat+proper+form+tutorial",
        tips: "Brace core, sit back into hips. Knees track over toes. Full depth.",
        muscles: ["Quads", "Glutes"]
      },
      {
        id: "incline-press",
        name: "Incline Dumbbell Press",
        sets: 4, reps: 12, weight: 10, unit: "kg",
        rest: 90,
        video: "https://www.youtube.com/results?search_query=incline+dumbbell+press+tutorial+form",
        tips: "30-45deg incline. Press up and slightly in. Control the descent.",
        muscles: ["Chest", "Shoulders", "Triceps"]
      },
      {
        id: "goblet-squat",
        name: "Deficit Goblet Squat",
        sets: 3, reps: 12, weight: 20, unit: "kg",
        rest: 90,
        video: "https://www.youtube.com/results?search_query=deficit+goblet+squat+tutorial",
        tips: "Stand on small plates for extra range. Hold dumbbell at chest. Stay upright.",
        muscles: ["Quads", "Glutes"]
      },
      {
        id: "adductor-iso",
        name: "Adductor Iso Hold (Fit Ball)",
        sets: 3, reps: "30s", weight: 0, unit: "",
        rest: 45,
        isHold: true,
        video: "https://www.youtube.com/results?search_query=adductor+isometric+squeeze+exercise+ball",
        tips: "Squeeze the ball between your knees. Hold 30 seconds. Breathe steadily.",
        muscles: ["Adductors"]
      },
      {
        id: "walking-lunges",
        name: "Walking Lunges",
        sets: 3, reps: 8, weight: 0, unit: "each leg",
        rest: 60,
        video: "https://www.youtube.com/results?search_query=walking+lunges+proper+form+tutorial",
        tips: "Long steps, back knee nearly touches floor. Keep torso upright.",
        muscles: ["Quads", "Glutes"]
      },
      {
        id: "tricep-pushdown",
        name: "Triceps Cable Pushdown",
        sets: 3, reps: 12, weight: 0, unit: "kg",
        rest: 60,
        video: "https://www.youtube.com/results?search_query=triceps+cable+pushdown+proper+form",
        tips: "Elbows pinned to sides. Full extension at the bottom. Squeeze triceps.",
        muscles: ["Triceps"]
      }
    ],
    finisher: {
      name: "Cardio Finisher",
      rounds: 4,
      exercises: ["Jumping Jacks (30s)", "High Knees (30s)"],
      video: "https://www.youtube.com/results?search_query=jumping+jacks+high+knees+cardio+finisher"
    }
  }
};

const SCHEDULE = [
  { day: 1, label: "Monday", workout: "dayA" },
  { day: 2, label: "Tuesday", workout: "dayB" },
  { day: 3, label: "Wednesday", workout: "dayA" },
  { day: 4, label: "Thursday", workout: "dayB" },
  { day: 5, label: "Friday", workout: "dayA" },
  { day: 6, label: "Saturday", workout: "dayB" }
];

// Storage Helpers
function loadData(key, fallback) {
  try { const d = localStorage.getItem(key); return d ? JSON.parse(d) : fallback; }
  catch { return fallback; }
}
function saveData(key, data) {
  try { localStorage.setItem(key, JSON.stringify(data)); } catch {}
}

// Timer Component
function RestTimer({ seconds, onComplete }) {
  const [remaining, setRemaining] = useState(seconds);
  const intervalRef = useRef(null);

  useEffect(() => {
    setRemaining(seconds);
    intervalRef.current = setInterval(() => {
      setRemaining(prev => {
        if (prev <= 1) { clearInterval(intervalRef.current); onComplete(); return 0; }
        return prev - 1;
      });
    }, 1000);
    return () => clearInterval(intervalRef.current);
  }, [seconds]);

  const pct = ((seconds - remaining) / seconds) * 100;
  const mins = Math.floor(remaining / 60);
  const secs = remaining % 60;

  return (
    <div style={{ display: "flex", alignItems: "center", gap: 16, padding: "16px 20px", background: "#f59e0b11", borderRadius: 12, border: "1px solid #f59e0b33" }}>
      <div style={{ position: "relative", width: 52, height: 52 }}>
        <svg width="52" height="52" style={{ transform: "rotate(-90deg)" }}>
          <circle cx="26" cy="26" r="22" fill="none" stroke="#2a2a2a" strokeWidth="4" />
          <circle cx="26" cy="26" r="22" fill="none" stroke="#f59e0b" strokeWidth="4"
            strokeDasharray={138} strokeDashoffset={138 - (pct / 100) * 138}
            strokeLinecap="round" className="timer-ring" />
        </svg>
      </div>
      <div>
        <div style={{ fontSize: 12, color: "#f59e0b", fontWeight: 600, textTransform: "uppercase", letterSpacing: 1 }}>Rest</div>
        <div style={{ fontSize: 28, fontWeight: 800, fontVariantNumeric: "tabular-nums" }}>
          {mins}:{secs.toString().padStart(2, "0")}
        </div>
      </div>
      <button className="btn" onClick={onComplete}
        style={{ marginLeft: "auto", background: "#2a2a2a", color: "#f59e0b", padding: "10px 18px", fontSize: 13 }}>
        Skip ->
      </button>
    </div>
  );
}

// Session Timer
function SessionTimer({ startTime }) {
  const [elapsed, setElapsed] = useState(0);
  useEffect(() => {
    const i = setInterval(() => setElapsed(Math.floor((Date.now() - startTime) / 1000)), 1000);
    return () => clearInterval(i);
  }, [startTime]);
  const m = Math.floor(elapsed / 60);
  const s = elapsed % 60;
  const pct = Math.min((elapsed / 3600) * 100, 100);
  return (
    <div style={{ display: "flex", alignItems: "center", gap: 12 }}>
      <div style={{ fontSize: 13, color: "#888" }}>Session</div>
      <div style={{ fontSize: 20, fontWeight: 700, fontVariantNumeric: "tabular-nums" }}>{m}:{s.toString().padStart(2, "0")}</div>
      <div style={{ flex: 1, maxWidth: 100 }}>
        <div className="progress-bar"><div className="progress-fill" style={{ width: pct + "%" }} /></div>
      </div>
      <div style={{ fontSize: 11, color: "#666" }}>/ 60 min</div>
    </div>
  );
}

// Muscle Tag
function MuscleTag({ name }) {
  const colors = {
    Back: "#3b82f6", Biceps: "#8b5cf6", Shoulders: "#06b6d4", Glutes: "#ec4899",
    Hamstrings: "#f97316", Quads: "#22c55e", Chest: "#ef4444", Triceps: "#a855f7",
    Adductors: "#14b8a6"
  };
  const c = colors[name] || "#888";
  return (
    <span style={{ fontSize: 11, fontWeight: 600, padding: "3px 8px", borderRadius: 6, background: c + "18", color: c, border: `1px solid ${c}33` }}>
      {name}
    </span>
  );
}

// Exercise Card
function ExerciseCard({ exercise, exerciseIndex, completedSets, onToggleSet, onWeightChange, weights, showTimer, onStartRest }) {
  const isAllDone = completedSets.filter(Boolean).length === exercise.sets;

  return (
    <div className="card exercise-card fade-in" style={{
      padding: 20, opacity: isAllDone ? 0.6 : 1,
      borderColor: isAllDone ? "#16a34a44" : undefined,
      animation: `slideUp 0.3s ease ${exerciseIndex * 0.05}s both`
    }}>
      <div className="exercise-header" style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 12 }}>
        <div>
          <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 6 }}>
            <span style={{ fontSize: 11, fontWeight: 700, color: "#f59e0b", background: "#f59e0b18", padding: "2px 8px", borderRadius: 6 }}>
              #{exerciseIndex + 1}
            </span>
            <h3 style={{ fontSize: 16, fontWeight: 700, color: isAllDone ? "#22c55e" : "#fff" }}>
              {exercise.name} {isAllDone && "v"}
            </h3>
          </div>
          <div style={{ display: "flex", gap: 6, flexWrap: "wrap" }}>
            {exercise.muscles.map(m => <MuscleTag key={m} name={m} />)}
          </div>
        </div>
        <a href={exercise.video} target="_blank" rel="noopener noreferrer" className="video-btn">
          > Video
        </a>
      </div>

      <p style={{ fontSize: 13, color: "#888", marginBottom: 16, lineHeight: 1.5 }}>
        Tip: {exercise.tips}
      </p>

      <div style={{ display: "flex", alignItems: "center", gap: 12, marginBottom: 16, flexWrap: "wrap" }}>
        <div style={{ fontSize: 13, color: "#aaa" }}>
          <strong style={{ color: "#fff" }}>{exercise.sets} x {exercise.reps}</strong>
          {exercise.isHold ? " hold" : " reps"}
        </div>
        {!exercise.isHold && exercise.weight > 0 && (
          <div style={{ display: "flex", alignItems: "center", gap: 6 }}>
            <span style={{ fontSize: 12, color: "#888" }}>Weight:</span>
            <input type="number" value={weights[exercise.id] ?? exercise.weight} step={0.5}
              onChange={e => onWeightChange(exercise.id, parseFloat(e.target.value) || 0)} />
            <span style={{ fontSize: 12, color: "#888" }}>{exercise.unit}</span>
          </div>
        )}
      </div>

      <div style={{ display: "flex", gap: 8, alignItems: "center", flexWrap: "wrap" }}>
        <span style={{ fontSize: 12, color: "#666", marginRight: 4 }}>Sets:</span>
        {Array.from({ length: exercise.sets }).map((_, i) => (
          <button key={i} className={`set-btn ${completedSets[i] ? "done" : "pending"}`}
            onClick={() => {
              onToggleSet(exerciseIndex, i);
              if (!completedSets[i]) onStartRest(exercise.rest);
            }}>
            {completedSets[i] ? "v" : i + 1}
          </button>
        ))}
        <span style={{ fontSize: 12, color: "#666", marginLeft: 8 }}>
          {completedSets.filter(Boolean).length}/{exercise.sets}
        </span>
      </div>
    </div>
  );
}

// Weight Log
function WeightLog({ log, onAdd }) {
  const [weight, setWeight] = useState("");
  return (
    <div className="card" style={{ padding: 20 }}>
      <h3 style={{ fontSize: 16, fontWeight: 700, marginBottom: 16 }}> Body Weight Log</h3>
      <div style={{ display: "flex", gap: 8, marginBottom: 16 }}>
        <input type="number" value={weight} onChange={e => setWeight(e.target.value)}
          placeholder="kg" step={0.1} style={{ flex: 1, maxWidth: 120 }} />
        <button className="btn" onClick={() => { if (weight) { onAdd(parseFloat(weight)); setWeight(""); } }}
          style={{ background: "#f59e0b", color: "#000", padding: "8px 20px", fontSize: 13 }}>
          Log Today
        </button>
      </div>
      {log.length > 0 && (
        <div style={{ maxHeight: 200, overflowY: "auto" }}>
          {log.slice().reverse().map((entry, i) => (
            <div key={i} className="weight-log-entry" style={{
              display: "flex", justifyContent: "space-between", padding: "8px 0",
              borderBottom: "1px solid #2a2a2a", fontSize: 13
            }}>
              <span style={{ color: "#888" }}>{entry.date}</span>
              <span style={{ fontWeight: 700 }}>{entry.weight} kg</span>
              {i > 0 && log.length > 1 && (() => {
                const prev = log[log.length - 1 - i + (i > 0 ? -1 : 0)];
                // skip diff for simplicity
                return null;
              })()}
            </div>
          ))}
        </div>
      )}
      {log.length === 0 && <p style={{ fontSize: 13, color: "#666" }}>No entries yet. Start tracking!</p>}
    </div>
  );
}

// Workout History
function WorkoutHistory({ history }) {
  if (history.length === 0) return (
    <div className="card" style={{ padding: 40, textAlign: "center" }}>
      <div style={{ fontSize: 40, marginBottom: 12 }}></div>
      <p style={{ color: "#888" }}>No completed workouts yet. Get started!</p>
    </div>
  );
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
      {history.slice().reverse().map((h, i) => (
        <div key={i} className="card fade-in" style={{ padding: 16 }}>
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
            <div>
              <div style={{ fontSize: 14, fontWeight: 700 }}>{h.workout}</div>
              <div style={{ fontSize: 12, color: "#888" }}>{h.date}</div>
            </div>
            <div style={{ textAlign: "right" }}>
              <div style={{ fontSize: 14, fontWeight: 700, color: "#f59e0b" }}>{h.duration}</div>
              <div style={{ fontSize: 12, color: "#888" }}>{h.setsCompleted} sets done</div>
            </div>
          </div>
        </div>
      ))}
    </div>
  );
}

// Main App
function App() {
  const [activeTab, setActiveTab] = useState("workout");
  const [currentDay, setCurrentDay] = useState(() => {
    const jsDay = new Date().getDay(); // 0=Sun
    if (jsDay === 0) return 0; // Sunday - rest day
    return jsDay; // 1=Mon...6=Sat
  });
  const [sessionActive, setSessionActive] = useState(false);
  const [sessionStart, setSessionStart] = useState(null);
  const [completedSets, setCompletedSets] = useState({});
  const [exerciseWeights, setExerciseWeights] = useState(() => loadData("bw_exercise_weights", {}));
  const [restTimer, setRestTimer] = useState(null);
  const [weightLog, setWeightLog] = useState(() => loadData("bw_weight_log", []));
  const [workoutHistory, setWorkoutHistory] = useState(() => loadData("bw_workout_history", []));
  const [finisherDone, setFinisherDone] = useState(false);

  const scheduleEntry = SCHEDULE.find(s => s.day === currentDay);
  const todayWorkout = scheduleEntry ? EXERCISES[scheduleEntry.workout] : null;

  const startSession = () => {
    setSessionActive(true);
    setSessionStart(Date.now());
    setCompletedSets({});
    setFinisherDone(false);
  };

  const toggleSet = (exIdx, setIdx) => {
    setCompletedSets(prev => {
      const key = `${exIdx}-${setIdx}`;
      return { ...prev, [key]: !prev[key] };
    });
  };

  const getCompletedSets = (exIdx, totalSets) => {
    return Array.from({ length: totalSets }).map((_, i) => !!completedSets[`${exIdx}-${i}`]);
  };

  const totalSets = todayWorkout ? todayWorkout.exercises.reduce((sum, ex) => sum + ex.sets, 0) : 0;
  const doneSets = Object.values(completedSets).filter(Boolean).length;
  const workoutProgress = totalSets > 0 ? (doneSets / totalSets) * 100 : 0;

  const finishWorkout = () => {
    const elapsed = Math.floor((Date.now() - sessionStart) / 1000);
    const mins = Math.floor(elapsed / 60);
    const secs = elapsed % 60;
    const entry = {
      date: new Date().toLocaleDateString("en-US", { weekday: "short", month: "short", day: "numeric" }),
      workout: todayWorkout.name,
      duration: `${mins}m ${secs}s`,
      setsCompleted: doneSets
    };
    const newHistory = [...workoutHistory, entry];
    setWorkoutHistory(newHistory);
    saveData("bw_workout_history", newHistory);
    setSessionActive(false);
    setSessionStart(null);
    setCompletedSets({});
    setRestTimer(null);
  };

  const updateWeight = (exId, val) => {
    const updated = { ...exerciseWeights, [exId]: val };
    setExerciseWeights(updated);
    saveData("bw_exercise_weights", updated);
  };

  const addWeightLog = (w) => {
    const entry = { date: new Date().toLocaleDateString("en-US", { month: "short", day: "numeric", year: "numeric" }), weight: w };
    const updated = [...weightLog, entry];
    setWeightLog(updated);
    saveData("bw_weight_log", updated);
  };

  return (
    <div style={{ maxWidth: 640, margin: "0 auto", padding: "20px 16px", paddingBottom: 100 }}>
      {/* Header */}
      <div style={{ textAlign: "center", marginBottom: 24 }}>
        <div style={{ fontSize: 32, fontWeight: 900, letterSpacing: -1 }}>
          <span style={{ color: "#f59e0b" }}>BRANDON</span>'s
        </div>
        <div style={{ fontSize: 14, color: "#888", fontWeight: 500, letterSpacing: 2, textTransform: "uppercase" }}>
          Training Program
        </div>
        <div style={{ fontSize: 12, color: "#555", marginTop: 4 }}>Hypertrophy | 6 days/week | 1 hour sessions</div>
      </div>

      {/* Tabs */}
      <div style={{ display: "flex", gap: 8, marginBottom: 20, overflowX: "auto", padding: "0 0 4px" }}>
        {[
          { id: "workout", label: " Workout" },
          { id: "schedule", label: " Schedule" },
          { id: "weight", label: " Weight" },
          { id: "history", label: " History" }
        ].map(t => (
          <button key={t.id} className={`tab-btn ${activeTab === t.id ? "active" : ""}`}
            onClick={() => setActiveTab(t.id)}>{t.label}</button>
        ))}
      </div>

      {/* Workout Tab */}
      {activeTab === "workout" && (
        <div className="fade-in">
          {/* Day selector */}
          <div style={{ display: "flex", gap: 6, marginBottom: 16, justifyContent: "center" }}>
            {SCHEDULE.map(s => (
              <button key={s.day} className="btn" onClick={() => { if (!sessionActive) setCurrentDay(s.day); }}
                style={{
                  width: 44, height: 44, borderRadius: 10, fontSize: 12, fontWeight: 700,
                  background: currentDay === s.day ? "#f59e0b" : "#1a1a1a",
                  color: currentDay === s.day ? "#000" : "#888",
                  border: `1px solid ${currentDay === s.day ? "#f59e0b" : "#2a2a2a"}`
                }}>
                {s.label.slice(0, 3)}
              </button>
            ))}
            <button className="btn" onClick={() => { if (!sessionActive) setCurrentDay(0); }}
              style={{
                width: 44, height: 44, borderRadius: 10, fontSize: 12, fontWeight: 700,
                background: currentDay === 0 ? "#f59e0b" : "#1a1a1a",
                color: currentDay === 0 ? "#000" : "#888",
                border: `1px solid ${currentDay === 0 ? "#f59e0b" : "#2a2a2a"}`
              }}>Sun</button>
          </div>

          {currentDay === 0 ? (
            <div className="card" style={{ padding: 40, textAlign: "center" }}>
              <div style={{ fontSize: 48, marginBottom: 12 }}></div>
              <h2 style={{ fontSize: 20, fontWeight: 700, marginBottom: 8 }}>Rest Day</h2>
              <p style={{ color: "#888", fontSize: 14 }}>Recovery is when you grow. Stretch, hydrate, and eat well.</p>
            </div>
          ) : todayWorkout && (
            <>
              {/* Workout header */}
              <div className="card" style={{ padding: 20, marginBottom: 16 }}>
                <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 12 }}>
                  <div>
                    <h2 style={{ fontSize: 18, fontWeight: 800 }}>{todayWorkout.name}</h2>
                    <p style={{ fontSize: 13, color: "#888" }}>{scheduleEntry.label} | {todayWorkout.exercises.length} exercises + finisher</p>
                  </div>
                  {sessionActive && <SessionTimer startTime={sessionStart} />}
                </div>

                {!sessionActive ? (
                  <button className="btn" onClick={startSession}
                    style={{ width: "100%", padding: "14px", fontSize: 15, background: "#f59e0b", color: "#000" }}>
                    Start Workout ->
                  </button>
                ) : (
                  <>
                    <div style={{ marginBottom: 8, display: "flex", justifyContent: "space-between", fontSize: 12 }}>
                      <span style={{ color: "#888" }}>Progress</span>
                      <span style={{ color: "#f59e0b", fontWeight: 700 }}>{doneSets}/{totalSets} sets</span>
                    </div>
                    <div className="progress-bar" style={{ marginBottom: 12 }}>
                      <div className="progress-fill" style={{ width: workoutProgress + "%" }} />
                    </div>
                  </>
                )}
              </div>

              {/* Warmup */}
              {sessionActive && (
                <div className="card" style={{ padding: 16, marginBottom: 12, borderColor: "#f59e0b33" }}>
                  <div style={{ fontSize: 13, fontWeight: 600, color: "#f59e0b" }}>> Warmup</div>
                  <div style={{ fontSize: 14, color: "#ccc", marginTop: 4 }}>{todayWorkout.warmup}</div>
                </div>
              )}

              {/* Rest Timer */}
              {restTimer && sessionActive && (
                <div style={{ marginBottom: 12 }}>
                  <RestTimer seconds={restTimer} onComplete={() => setRestTimer(null)} />
                </div>
              )}

              {/* Exercises */}
              {sessionActive && (
                <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
                  {todayWorkout.exercises.map((ex, i) => (
                    <ExerciseCard key={ex.id} exercise={ex} exerciseIndex={i}
                      completedSets={getCompletedSets(i, ex.sets)}
                      onToggleSet={toggleSet}
                      onWeightChange={updateWeight}
                      weights={exerciseWeights}
                      onStartRest={(secs) => setRestTimer(secs)} />
                  ))}

                  {/* Finisher */}
                  <div className="card" style={{ padding: 20, borderColor: finisherDone ? "#16a34a44" : "#f5720b33" }}>
                    <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 12 }}>
                      <div>
                        <h3 style={{ fontSize: 16, fontWeight: 700, color: finisherDone ? "#22c55e" : "#f97316" }}>
                          > {todayWorkout.finisher.name} {finisherDone && "v"}
                        </h3>
                        <p style={{ fontSize: 13, color: "#888" }}>{todayWorkout.finisher.rounds} rounds</p>
                      </div>
                      <a href={todayWorkout.finisher.video} target="_blank" rel="noopener noreferrer" className="video-btn">> Video</a>
                    </div>
                    <div style={{ marginBottom: 12 }}>
                      {todayWorkout.finisher.exercises.map((e, i) => (
                        <div key={i} style={{ fontSize: 14, color: "#ccc", padding: "4px 0" }}>* {e}</div>
                      ))}
                    </div>
                    <button className="btn" onClick={() => setFinisherDone(!finisherDone)}
                      style={{
                        padding: "10px 20px", fontSize: 13,
                        background: finisherDone ? "#16a34a22" : "#f5720b22",
                        color: finisherDone ? "#22c55e" : "#f97316",
                        border: `1px solid ${finisherDone ? "#16a34a" : "#f5720b"}`
                      }}>
                      {finisherDone ? "v Completed" : "Mark Complete"}
                    </button>
                  </div>

                  {/* Finish button */}
                  <button className="btn" onClick={finishWorkout}
                    style={{ width: "100%", padding: 16, fontSize: 16, background: "#16a34a", color: "#fff", marginTop: 8 }}>
                    [done] Finish Workout
                  </button>
                </div>
              )}

              {/* Preview when not in session */}
              {!sessionActive && (
                <div style={{ display: "flex", flexDirection: "column", gap: 8 }}>
                  {todayWorkout.exercises.map((ex, i) => (
                    <div key={ex.id} className="card" style={{ padding: 16, display: "flex", justifyContent: "space-between", alignItems: "center" }}>
                      <div>
                        <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
                          <span style={{ fontSize: 11, fontWeight: 700, color: "#f59e0b" }}>#{i + 1}</span>
                          <span style={{ fontSize: 14, fontWeight: 600 }}>{ex.name}</span>
                        </div>
                        <div style={{ fontSize: 12, color: "#888", marginTop: 4 }}>
                          {ex.sets} x {ex.reps}{ex.isHold ? " hold" : ""} {ex.weight > 0 ? `| ${exerciseWeights[ex.id] ?? ex.weight} ${ex.unit}` : ""}
                        </div>
                      </div>
                      <a href={ex.video} target="_blank" rel="noopener noreferrer" className="video-btn">></a>
                    </div>
                  ))}
                </div>
              )}
            </>
          )}
        </div>
      )}

      {/* Schedule Tab */}
      {activeTab === "schedule" && (
        <div className="fade-in" style={{ display: "flex", flexDirection: "column", gap: 12 }}>
          <div className="card" style={{ padding: 20 }}>
            <h3 style={{ fontSize: 16, fontWeight: 700, marginBottom: 4 }}>Weekly Schedule</h3>
            <p style={{ fontSize: 13, color: "#888" }}>Alternating Day A / Day B pattern for balanced training</p>
          </div>
          {SCHEDULE.map(s => {
            const w = EXERCISES[s.workout];
            const isToday = s.day === new Date().getDay();
            return (
              <div key={s.day} className="card" style={{ padding: 16, borderColor: isToday ? "#f59e0b44" : undefined }}>
                <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
                  <div>
                    <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
                      <span style={{ fontSize: 15, fontWeight: 700 }}>{s.label}</span>
                      {isToday && <span style={{ fontSize: 10, fontWeight: 700, color: "#f59e0b", background: "#f59e0b22", padding: "2px 8px", borderRadius: 4 }}>TODAY</span>}
                    </div>
                    <div style={{ fontSize: 13, color: "#888", marginTop: 2 }}>{w.name}</div>
                  </div>
                  <span style={{ fontSize: 12, color: "#666" }}>{w.exercises.length} exercises</span>
                </div>
              </div>
            );
          })}
          <div className="card" style={{ padding: 16, borderColor: new Date().getDay() === 0 ? "#f59e0b44" : undefined }}>
            <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
              <span style={{ fontSize: 15, fontWeight: 700 }}>Sunday</span>
              {new Date().getDay() === 0 && <span style={{ fontSize: 10, fontWeight: 700, color: "#f59e0b", background: "#f59e0b22", padding: "2px 8px", borderRadius: 4 }}>TODAY</span>}
            </div>
            <div style={{ fontSize: 13, color: "#888", marginTop: 2 }}>Rest Day | Recovery & Mobility</div>
          </div>
        </div>
      )}

      {/* Weight Tab */}
      {activeTab === "weight" && (
        <div className="fade-in">
          <WeightLog log={weightLog} onAdd={addWeightLog} />
        </div>
      )}

      {/* History Tab */}
      {activeTab === "history" && (
        <div className="fade-in">
          <WorkoutHistory history={workoutHistory} />
        </div>
      )}
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Brandon's Training App</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Inter', sans-serif; background: #0a0a0a; color: #e5e5e5; min-height: 100vh; }
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: #1a1a1a; }
  ::-webkit-scrollbar-thumb { background: #f59e0b; border-radius: 3px; }

  .fade-in { animation: fadeIn 0.3s ease-in; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
  @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

  .btn { cursor: pointer; border: none; border-radius: 12px; font-family: 'Inter', sans-serif; font-weight: 600; transition: all 0.2s; }
  .btn:hover { transform: translateY(-1px); }
  .btn:active { transform: translateY(0); }

  .card { background: #1a1a1a; border-radius: 16px; border: 1px solid #2a2a2a; }

  input[type="number"] {
    background: #2a2a2a; border: 1px solid #3a3a3a; color: #fff; border-radius: 8px;
    padding: 8px 12px; font-family: 'Inter', sans-serif; font-size: 14px; width: 80px; text-align: center;
  }
  input[type="number"]:focus { outline: none; border-color: #f59e0b; }

  .exercise-card { transition: all 0.2s; }
  .exercise-card:hover { border-color: #f59e0b44; }

  .timer-ring { transition: stroke-dashoffset 1s linear; }

  .video-btn {
    display: inline-flex; align-items: center; gap: 6px; background: #dc262622;
    color: #ef4444; border: 1px solid #ef444433; border-radius: 8px; padding: 6px 12px;
    font-size: 12px; font-weight: 600; cursor: pointer; transition: all 0.2s; text-decoration: none;
  }
  .video-btn:hover { background: #dc262644; border-color: #ef4444; color: #fff; }

  .tab-btn {
    padding: 10px 20px; border-radius: 10px; font-size: 14px; font-weight: 600;
    cursor: pointer; transition: all 0.2s; border: 1px solid transparent; background: transparent; color: #888;
  }
  .tab-btn.active { background: #f59e0b; color: #000; }
  .tab-btn:hover:not(.active) { color: #fff; background: #2a2a2a; }

  .progress-bar { height: 6px; background: #2a2a2a; border-radius: 3px; overflow: hidden; }
  .progress-fill { height: 100%; background: linear-gradient(90deg, #f59e0b, #f97316); border-radius: 3px; transition: width 0.5s ease; }

  .set-btn {
    width: 44px; height: 44px; border-radius: 10px; display: flex; align-items: center; justify-content: center;
    font-weight: 700; font-size: 14px; cursor: pointer; transition: all 0.2s; border: 2px solid;
  }
  .set-btn.done { background: #16a34a22; border-color: #16a34a; color: #22c55e; }
  .set-btn.pending { background: #2a2a2a; border-color: #3a3a3a; color: #888; }
  .set-btn.pending:hover { border-color: #f59e0b; color: #f59e0b; }

  .weight-log-entry { animation: slideUp 0.3s ease; }

  @media (max-width: 640px) {
    .exercise-header { flex-direction: column; align-items: flex-start !important; gap: 8px; }
  }
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useRef, useCallback } = React;

// -- Exercise Data --
const EXERCISES = {
  dayA: {
    name: "Day A â Pull & Glutes",
    warmup: "5 min light cardio + dynamic stretching",
    exercises: [
      {
        id: "seated-row",
        name: "Seated Cable Row (High Bar)",
        sets: 4, reps: 12, weight: 15, unit: "kg",
        rest: 90,
        video: "https://www.youtube.com/results?search_query=seated+cable+row+proper+form+tutorial",
        tips: "Keep your chest up, squeeze shoulder blades at the top. Control the eccentric.",
        muscles: ["Back", "Biceps"]
      },
      {
        id: "hip-thrust",
        name: "Hip Thrust",
        sets: 3, reps: 12, weight: 15, unit: "kg",
        rest: 90,
        video: "https://www.youtube.com/results?search_query=barbell+hip+thrust+proper+form",
        tips: "Drive through heels, squeeze glutes at the top. Chin tucked, don't hyperextend.",
        muscles: ["Glutes", "Hamstrings"]
      },
      {
        id: "incline-lateral",
        name: "Incline Lateral Raises",
        sets: 3, reps: 12, weight: 7.5, unit: "kg",
        rest: 60,
        video: "https://www.youtube.com/results?search_query=incline+dumbbell+lateral+raise+tutorial",
        tips: "Lie on an incline bench, raise dumbbells to shoulder height. Slow and controlled.",
        muscles: ["Shoulders"]
      },
      {
        id: "floor-bridge",
        name: "Floor Hamstring Bridge",
        sets: 3, reps: 12, weight: 17.5, unit: "kg",
        rest: 60,
        video: "https://www.youtube.com/results?search_query=weighted+glute+bridge+floor+hamstring",
        tips: "Place weight on hips, drive through heels. Focus on hamstring contraction.",
        muscles: ["Hamstrings", "Glutes"]
      },
      {
        id: "bicep-curls",
        name: "Bicep Curls (10-10\" Tempo)",
        sets: 3, reps: 10, weight: 7.5, unit: "kg",
        rest: 60,
        video: "https://www.youtube.com/results?search_query=slow+tempo+bicep+curl+tutorial",
        tips: "10 seconds up, 10 seconds down. Maximum time under tension. Keep elbows pinned.",
        muscles: ["Biceps"]
      }
    ],
    finisher: {
      name: "Cardio Finisher",
      rounds: 4,
      exercises: ["Jumping Jacks (30s)", "High Knees (30s)"],
      video: "https://www.youtube.com/results?search_query=jumping+jacks+high+knees+cardio+finisher"
    }
  },
  dayB: {
    name: "Day B â Squat & Press",
    warmup: "5 min light cardio + dynamic stretching",
    exercises: [
      {
        id: "back-squat",
        name: "Back Squat",
        sets: 4, reps: 10, weight: 20, unit: "kg",
        rest: 120,
        video: "https://www.youtube.com/results?search_query=barbell+back+squat+proper+form+tutorial",
        tips: "Brace core, sit back into hips. Knees track over toes. Full depth.",
        muscles: ["Quads", "Glutes"]
      },
      {
        id: "incline-press",
        name: "Incline Dumbbell Press",
        sets: 4, reps: 12, weight: 10, unit: "kg",
        rest: 90,
        video: "https://www.youtube.com/results?search_query=incline+dumbbell+press+tutorial+form",
        tips: "30-45° incline. Press up and slightly in. Control the descent.",
        muscles: ["Chest", "Shoulders", "Triceps"]
      },
      {
        id: "goblet-squat",
        name: "Deficit Goblet Squat",
        sets: 3, reps: 12, weight: 20, unit: "kg",
        rest: 90,
        video: "https://www.youtube.com/results?search_query=deficit+goblet+squat+tutorial",
        tips: "Stand on small plates for extra range. Hold dumbbell at chest. Stay upright.",
        muscles: ["Quads", "Glutes"]
      },
      {
        id: "adductor-iso",
        name: "Adductor Iso Hold (Fit Ball)",
        sets: 3, reps: "30s", weight: 0, unit: "",
        rest: 45,
        isHold: true,
        video: "https://www.youtube.com/results?search_query=adductor+isometric+squeeze+exercise+ball",
        tips: "Squeeze the ball between your knees. Hold 30 seconds. Breathe steadily.",
        muscles: ["Adductors"]
      },
      {
        id: "walking-lunges",
        name: "Walking Lunges",
        sets: 3, reps: 8, weight: 0, unit: "each leg",
        rest: 60,
        video: "https://www.youtube.com/results?search_query=walking+lunges+proper+form+tutorial",
        tips: "Long steps, back knee nearly touches floor. Keep torso upright.",
        muscles: ["Quads", "Glutes"]
      },
      {
        id: "tricep-pushdown",
        name: "Triceps Cable Pushdown",
        sets: 3, reps: 12, weight: 0, unit: "kg",
        rest: 60,
        video: "https://www.youtube.com/results?search_query=triceps+cable+pushdown+proper+form",
        tips: "Elbows pinned to sides. Full extension at the bottom. Squeeze triceps.",
        muscles: ["Triceps"]
      }
    ],
    finisher: {
      name: "Cardio Finisher",
      rounds: 4,
      exercises: ["Jumping Jacks (30s)", "High Knees (30s)"],
      video: "https://www.youtube.com/results?search_query=jumping+jacks+high+knees+cardio+finisher"
    }
  }
};

const SCHEDULE = [
  { day: 1, label: "Monday", workout: "dayA" },
  { day: 2, label: "Tuesday", workout: "dayB" },
  { day: 3, label: "Wednesday", workout: "dayA" },
  { day: 4, label: "Thursday", workout: "dayB" },
  { day: 5, label: "Friday", workout: "dayA" },
  { day: 6, label: "Saturday", workout: "dayB" }
];

// -- Storage Helpers --
function loadData(key, fallback) {
  try { const d = localStorage.getItem(key); return d ? JSON.parse(d) : fallback; }
  catch { return fallback; }
}
function saveData(key, data) {
  try { localStorage.setItem(key, JSON.stringify(data)); } catch {}
}

// -- Timer Component --
function RestTimer({ seconds, onComplete }) {
  const [remaining, setRemaining] = useState(seconds);
  const intervalRef = useRef(null);

  useEffect(() => {
    setRemaining(seconds);
    intervalRef.current = setInterval(() => {
      setRemaining(prev => {
        if (prev <= 1) { clearInterval(intervalRef.current); onComplete(); return 0; }
        return prev - 1;
      });
    }, 1000);
    return () => clearInterval(intervalRef.current);
  }, [seconds]);

  const pct = ((seconds - remaining) / seconds) * 100;
  const mins = Math.floor(remaining / 60);
  const secs = remaining % 60;

  return (
    <div style={{ display: "flex", alignItems: "center", gap: 16, padding: "16px 20px", background: "#f59e0b11", borderRadius: 12, border: "1px solid #f59e0b33" }}>
      <div style={{ position: "relative", width: 52, height: 52 }}>
        <svg width="52" height="52" style={{ transform: "rotate(-90deg)" }}>
          <circle cx="26" cy="26" r="22" fill="none" stroke="#2a2a2a" strokeWidth="4" />
          <circle cx="26" cy="26" r="22" fill="none" stroke="#f59e0b" strokeWidth="4"
            strokeDasharray={138} strokeDashoffset={138 - (pct / 100) * 138}
            strokeLinecap="round" className="timer-ring" />
        </svg>
      </div>
      <div>
        <div style={{ fontSize: 12, color: "#f59e0b", fontWeight: 600, textTransform: "uppercase", letterSpacing: 1 }}>Rest</div>
        <div style={{ fontSize: 28, fontWeight: 800, fontVariantNumeric: "tabular-nums" }}>
          {mins}:{secs.toString().padStart(2, "0")}
        </div>
      </div>
      <button className="btn" onClick={onComplete}
        style={{ marginLeft: "auto", background: "#2a2a2a", color: "#f59e0b", padding: "10px 18px", fontSize: 13 }}>
        Skip â
      </button>
    </div>
  );
}

// -- Session Timer --
function SessionTimer({ startTime }) {
  const [elapsed, setElapsed] = useState(0);
  useEffect(() => {
    const i = setInterval(() => setElapsed(Math.floor((Date.now() - startTime) / 1000)), 1000);
    return () => clearInterval(i);
  }, [startTime]);
  const m = Math.floor(elapsed / 60);
  const s = elapsed % 60;
  const pct = Math.min((elapsed / 3600) * 100, 100);
  return (
    <div style={{ display: "flex", alignItems: "center", gap: 12 }}>
      <div style={{ fontSize: 13, color: "#888" }}>Session</div>
      <div style={{ fontSize: 20, fontWeight: 700, fontVariantNumeric: "tabular-nums" }}>{m}:{s.toString().padStart(2, "0")}</div>
      <div style={{ flex: 1, maxWidth: 100 }}>
        <div className="progress-bar"><div className="progress-fill" style={{ width: pct + "%" }} /></div>
      </div>
      <div style={{ fontSize: 11, color: "#666" }}>/ 60 min</div>
    </div>
  );
}

// -- Muscle Tag --
function MuscleTag({ name }) {
  const colors = {
    Back: "#3b82f6", Biceps: "#8b5cf6", Shoulders: "#06b6d4", Glutes: "#ec4899",
    Hamstrings: "#f97316", Quads: "#22c55e", Chest: "#ef4444", Triceps: "#a855f7",
    Adductors: "#14b8a6"
  };
  const c = colors[name] || "#888";
  return (
    <span style={{ fontSize: 11, fontWeight: 600, padding: "3px 8px", borderRadius: 6, background: c + "18", color: c, border: `1px solid ${c}33` }}>
      {name}
    </span>
  );
}

// -- Exercise Card --
function ExerciseCard({ exercise, exerciseIndex, completedSets, onToggleSet, onWeightChange, weights, showTimer, onStartRest }) {
  const isAllDone = completedSets.filter(Boolean).length === exercise.sets;

  return (
    <div className="card exercise-card fade-in" style={{
      padding: 20, opacity: isAllDone ? 0.6 : 1,
      borderColor: isAllDone ? "#16a34a44" : undefined,
      animation: `slideUp 0.3s ease ${exerciseIndex * 0.05}s both`
    }}>
      <div className="exercise-header" style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 12 }}>
        <div>
          <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 6 }}>
            <span style={{ fontSize: 11, fontWeight: 700, color: "#f59e0b", background: "#f59e0b18", padding: "2px 8px", borderRadius: 6 }}>
              #{exerciseIndex + 1}
            </span>
            <h3 style={{ fontSize: 16, fontWeight: 700, color: isAllDone ? "#22c55e" : "#fff" }}>
              {exercise.name} {isAllDone && "â"}
            </h3>
          </div>
          <div style={{ display: "flex", gap: 6, flexWrap: "wrap" }}>
            {exercise.muscles.map(m => <MuscleTag key={m} name={m} />)}
          </div>
        </div>
        <a href={exercise.video} target="_blank" rel="noopener noreferrer" className="video-btn">
          â¶ Video
        </a>
      </div>

      <p style={{ fontSize: 13, color: "#888", marginBottom: 16, lineHeight: 1.5 }}>
        ð¡ {exercise.tips}
      </p>

      <div style={{ display: "flex", alignItems: "center", gap: 12, marginBottom: 16, flexWrap: "wrap" }}>
        <div style={{ fontSize: 13, color: "#aaa" }}>
          <strong style={{ color: "#fff" }}>{exercise.sets} × {exercise.reps}</strong>
          {exercise.isHold ? " hold" : " reps"}
        </div>
        {!exercise.isHold && exercise.weight > 0 && (
          <div style={{ display: "flex", alignItems: "center", gap: 6 }}>
            <span style={{ fontSize: 12, color: "#888" }}>Weight:</span>
            <input type="number" value={weights[exercise.id] ?? exercise.weight} step={0.5}
              onChange={e => onWeightChange(exercise.id, parseFloat(e.target.value) || 0)} />
            <span style={{ fontSize: 12, color: "#888" }}>{exercise.unit}</span>
          </div>
        )}
      </div>

      <div style={{ display: "flex", gap: 8, alignItems: "center", flexWrap: "wrap" }}>
        <span style={{ fontSize: 12, color: "#666", marginRight: 4 }}>Sets:</span>
        {Array.from({ length: exercise.sets }).map((_, i) => (
          <button key={i} className={`set-btn ${completedSets[i] ? "done" : "pending"}`}
            onClick={() => {
              onToggleSet(exerciseIndex, i);
              if (!completedSets[i]) onStartRest(exercise.rest);
            }}>
            {completedSets[i] ? "â" : i + 1}
          </button>
        ))}
        <span style={{ fontSize: 12, color: "#666", marginLeft: 8 }}>
          {completedSets.filter(Boolean).length}/{exercise.sets}
        </span>
      </div>
    </div>
  );
}

// -- Weight Log --
function WeightLog({ log, onAdd }) {
  const [weight, setWeight] = useState("");
  return (
    <div className="card" style={{ padding: 20 }}>
      <h3 style={{ fontSize: 16, fontWeight: 700, marginBottom: 16 }}>ð Body Weight Log</h3>
      <div style={{ display: "flex", gap: 8, marginBottom: 16 }}>
        <input type="number" value={weight} onChange={e => setWeight(e.target.value)}
          placeholder="kg" step={0.1} style={{ flex: 1, maxWidth: 120 }} />
        <button className="btn" onClick={() => { if (weight) { onAdd(parseFloat(weight)); setWeight(""); } }}
          style={{ background: "#f59e0b", color: "#000", padding: "8px 20px", fontSize: 13 }}>
          Log Today
        </button>
      </div>
      {log.length > 0 && (
        <div style={{ maxHeight: 200, overflowY: "auto" }}>
          {log.slice().reverse().map((entry, i) => (
            <div key={i} className="weight-log-entry" style={{
              display: "flex", justifyContent: "space-between", padding: "8px 0",
              borderBottom: "1px solid #2a2a2a", fontSize: 13
            }}>
              <span style={{ color: "#888" }}>{entry.date}</span>
              <span style={{ fontWeight: 700 }}>{entry.weight} kg</span>
              {i > 0 && log.length > 1 && (() => {
                const prev = log[log.length - 1 - i + (i > 0 ? -1 : 0)];
                // skip diff for simplicity
                return null;
              })()}
            </div>
          ))}
        </div>
      )}
      {log.length === 0 && <p style={{ fontSize: 13, color: "#666" }}>No entries yet. Start tracking!</p>}
    </div>
  );
}

// -- Workout History --
function WorkoutHistory({ history }) {
  if (history.length === 0) return (
    <div className="card" style={{ padding: 40, textAlign: "center" }}>
      <div style={{ fontSize: 40, marginBottom: 12 }}>ð</div>
      <p style={{ color: "#888" }}>No completed workouts yet. Get started!</p>
    </div>
  );
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
      {history.slice().reverse().map((h, i) => (
        <div key={i} className="card fade-in" style={{ padding: 16 }}>
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
            <div>
              <div style={{ fontSize: 14, fontWeight: 700 }}>{h.workout}</div>
              <div style={{ fontSize: 12, color: "#888" }}>{h.date}</div>
            </div>
            <div style={{ textAlign: "right" }}>
              <div style={{ fontSize: 14, fontWeight: 700, color: "#f59e0b" }}>{h.duration}</div>
              <div style={{ fontSize: 12, color: "#888" }}>{h.setsCompleted} sets done</div>
            </div>
          </div>
        </div>
      ))}
    </div>
  );
}

// -- Main App --
function App() {
  const [activeTab, setActiveTab] = useState("workout");
  const [currentDay, setCurrentDay] = useState(() => {
    const jsDay = new Date().getDay(); // 0=Sun
    if (jsDay === 0) return 0; // Sunday - rest day
    return jsDay; // 1=Mon...6=Sat
  });
  const [sessionActive, setSessionActive] = useState(false);
  const [sessionStart, setSessionStart] = useState(null);
  const [completedSets, setCompletedSets] = useState({});
  const [exerciseWeights, setExerciseWeights] = useState(() => loadData("bw_exercise_weights", {}));
  const [restTimer, setRestTimer] = useState(null);
  const [weightLog, setWeightLog] = useState(() => loadData("bw_weight_log", []));
  const [workoutHistory, setWorkoutHistory] = useState(() => loadData("bw_workout_history", []));
  const [finisherDone, setFinisherDone] = useState(false);

  const scheduleEntry = SCHEDULE.find(s => s.day === currentDay);
  const todayWorkout = scheduleEntry ? EXERCISES[scheduleEntry.workout] : null;

  const startSession = () => {
    setSessionActive(true);
    setSessionStart(Date.now());
    setCompletedSets({});
    setFinisherDone(false);
  };

  const toggleSet = (exIdx, setIdx) => {
    setCompletedSets(prev => {
      const key = `${exIdx}-${setIdx}`;
      return { ...prev, [key]: !prev[key] };
    });
  };

  const getCompletedSets = (exIdx, totalSets) => {
    return Array.from({ length: totalSets }).map((_, i) => !!completedSets[`${exIdx}-${i}`]);
  };

  const totalSets = todayWorkout ? todayWorkout.exercises.reduce((sum, ex) => sum + ex.sets, 0) : 0;
  const doneSets = Object.values(completedSets).filter(Boolean).length;
  const workoutProgress = totalSets > 0 ? (doneSets / totalSets) * 100 : 0;

  const finishWorkout = () => {
    const elapsed = Math.floor((Date.now() - sessionStart) / 1000);
    const mins = Math.floor(elapsed / 60);
    const secs = elapsed % 60;
    const entry = {
      date: new Date().toLocaleDateString("en-US", { weekday: "short", month: "short", day: "numeric" }),
      workout: todayWorkout.name,
      duration: `${mins}m ${secs}s`,
      setsCompleted: doneSets
    };
    const newHistory = [...workoutHistory, entry];
    setWorkoutHistory(newHistory);
    saveData("bw_workout_history", newHistory);
    setSessionActive(false);
    setSessionStart(null);
    setCompletedSets({});
    setRestTimer(null);
  };

  const updateWeight = (exId, val) => {
    const updated = { ...exerciseWeights, [exId]: val };
    setExerciseWeights(updated);
    saveData("bw_exercise_weights", updated);
  };

  const addWeightLog = (w) => {
    const entry = { date: new Date().toLocaleDateString("en-US", { month: "short", day: "numeric", year: "numeric" }), weight: w };
    const updated = [...weightLog, entry];
    setWeightLog(updated);
    saveData("bw_weight_log", updated);
  };

  return (
    <div style={{ maxWidth: 640, margin: "0 auto", padding: "20px 16px", paddingBottom: 100 }}>
      {/* Header */}
      <div style={{ textAlign: "center", marginBottom: 24 }}>
        <div style={{ fontSize: 32, fontWeight: 900, letterSpacing: -1 }}>
          <span style={{ color: "#f59e0b" }}>BRANDON</span>'s
        </div>
        <div style={{ fontSize: 14, color: "#888", fontWeight: 500, letterSpacing: 2, textTransform: "uppercase" }}>
          Training Program
        </div>
        <div style={{ fontSize: 12, color: "#555", marginTop: 4 }}>Hypertrophy · 6 days/week · 1 hour sessions</div>
      </div>

      {/* Tabs */}
      <div style={{ display: "flex", gap: 8, marginBottom: 20, overflowX: "auto", padding: "0 0 4px" }}>
        {[
          { id: "workout", label: "ðï¸ Workout" },
          { id: "schedule", label: "ð Schedule" },
          { id: "weight", label: "âï¸ Weight" },
          { id: "history", label: "ð History" }
        ].map(t => (
          <button key={t.id} className={`tab-btn ${activeTab === t.id ? "active" : ""}`}
            onClick={() => setActiveTab(t.id)}>{t.label}</button>
        ))}
      </div>

      {/* -- Workout Tab -- */}
      {activeTab === "workout" && (
        <div className="fade-in">
          {/* Day selector */}
          <div style={{ display: "flex", gap: 6, marginBottom: 16, justifyContent: "center" }}>
            {SCHEDULE.map(s => (
              <button key={s.day} className="btn" onClick={() => { if (!sessionActive) setCurrentDay(s.day); }}
                style={{
                  width: 44, height: 44, borderRadius: 10, fontSize: 12, fontWeight: 700,
                  background: currentDay === s.day ? "#f59e0b" : "#1a1a1a",
                  color: currentDay === s.day ? "#000" : "#888",
                  border: `1px solid ${currentDay === s.day ? "#f59e0b" : "#2a2a2a"}`
                }}>
                {s.label.slice(0, 3)}
              </button>
            ))}
            <button className="btn" onClick={() => { if (!sessionActive) setCurrentDay(0); }}
              style={{
                width: 44, height: 44, borderRadius: 10, fontSize: 12, fontWeight: 700,
                background: currentDay === 0 ? "#f59e0b" : "#1a1a1a",
                color: currentDay === 0 ? "#000" : "#888",
                border: `1px solid ${currentDay === 0 ? "#f59e0b" : "#2a2a2a"}`
              }}>Sun</button>
          </div>

          {currentDay === 0 ? (
            <div className="card" style={{ padding: 40, textAlign: "center" }}>
              <div style={{ fontSize: 48, marginBottom: 12 }}>ð´</div>
              <h2 style={{ fontSize: 20, fontWeight: 700, marginBottom: 8 }}>Rest Day</h2>
              <p style={{ color: "#888", fontSize: 14 }}>Recovery is when you grow. Stretch, hydrate, and eat well.</p>
            </div>
          ) : todayWorkout && (
            <>
              {/* Workout header */}
              <div className="card" style={{ padding: 20, marginBottom: 16 }}>
                <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 12 }}>
                  <div>
                    <h2 style={{ fontSize: 18, fontWeight: 800 }}>{todayWorkout.name}</h2>
                    <p style={{ fontSize: 13, color: "#888" }}>{scheduleEntry.label} · {todayWorkout.exercises.length} exercises + finisher</p>
                  </div>
                  {sessionActive && <SessionTimer startTime={sessionStart} />}
                </div>

                {!sessionActive ? (
                  <button className="btn" onClick={startSession}
                    style={{ width: "100%", padding: "14px", fontSize: 15, background: "#f59e0b", color: "#000" }}>
                    Start Workout â
                  </button>
                ) : (
                  <>
                    <div style={{ marginBottom: 8, display: "flex", justifyContent: "space-between", fontSize: 12 }}>
                      <span style={{ color: "#888" }}>Progress</span>
                      <span style={{ color: "#f59e0b", fontWeight: 700 }}>{doneSets}/{totalSets} sets</span>
                    </div>
                    <div className="progress-bar" style={{ marginBottom: 12 }}>
                      <div className="progress-fill" style={{ width: workoutProgress + "%" }} />
                    </div>
                  </>
                )}
              </div>

              {/* Warmup */}
              {sessionActive && (
                <div className="card" style={{ padding: 16, marginBottom: 12, borderColor: "#f59e0b33" }}>
                  <div style={{ fontSize: 13, fontWeight: 600, color: "#f59e0b" }}>ð¥ Warmup</div>
                  <div style={{ fontSize: 14, color: "#ccc", marginTop: 4 }}>{todayWorkout.warmup}</div>
                </div>
              )}

              {/* Rest Timer */}
              {restTimer && sessionActive && (
                <div style={{ marginBottom: 12 }}>
                  <RestTimer seconds={restTimer} onComplete={() => setRestTimer(null)} />
                </div>
              )}

              {/* Exercises */}
              {sessionActive && (
                <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
                  {todayWorkout.exercises.map((ex, i) => (
                    <ExerciseCard key={ex.id} exercise={ex} exerciseIndex={i}
                      completedSets={getCompletedSets(i, ex.sets)}
                      onToggleSet={toggleSet}
                      onWeightChange={updateWeight}
                      weights={exerciseWeights}
                      onStartRest={(secs) => setRestTimer(secs)} />
                  ))}

                  {/* Finisher */}
                  <div className="card" style={{ padding: 20, borderColor: finisherDone ? "#16a34a44" : "#f5720b33" }}>
                    <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 12 }}>
                      <div>
                        <h3 style={{ fontSize: 16, fontWeight: 700, color: finisherDone ? "#22c55e" : "#f97316" }}>
                          ð¥ {todayWorkout.finisher.name} {finisherDone && "â"}
                        </h3>
                        <p style={{ fontSize: 13, color: "#888" }}>{todayWorkout.finisher.rounds} rounds</p>
                      </div>
                      <a href={todayWorkout.finisher.video} target="_blank" rel="noopener noreferrer" className="video-btn">â¶ Video</a>
                    </div>
                    <div style={{ marginBottom: 12 }}>
                      {todayWorkout.finisher.exercises.map((e, i) => (
                        <div key={i} style={{ fontSize: 14, color: "#ccc", padding: "4px 0" }}>â¢ {e}</div>
                      ))}
                    </div>
                    <button className="btn" onClick={() => setFinisherDone(!finisherDone)}
                      style={{
                        padding: "10px 20px", fontSize: 13,
                        background: finisherDone ? "#16a34a22" : "#f5720b22",
                        color: finisherDone ? "#22c55e" : "#f97316",
                        border: `1px solid ${finisherDone ? "#16a34a" : "#f5720b"}`
                      }}>
                      {finisherDone ? "â Completed" : "Mark Complete"}
                    </button>
                  </div>

                  {/* Finish button */}
                  <button className="btn" onClick={finishWorkout}
                    style={{ width: "100%", padding: 16, fontSize: 16, background: "#16a34a", color: "#fff", marginTop: 8 }}>
                    â Finish Workout
                  </button>
                </div>
              )}

              {/* Preview when not in session */}
              {!sessionActive && (
                <div style={{ display: "flex", flexDirection: "column", gap: 8 }}>
                  {todayWorkout.exercises.map((ex, i) => (
                    <div key={ex.id} className="card" style={{ padding: 16, display: "flex", justifyContent: "space-between", alignItems: "center" }}>
                      <div>
                        <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
                          <span style={{ fontSize: 11, fontWeight: 700, color: "#f59e0b" }}>#{i + 1}</span>
                          <span style={{ fontSize: 14, fontWeight: 600 }}>{ex.name}</span>
                        </div>
                        <div style={{ fontSize: 12, color: "#888", marginTop: 4 }}>
                          {ex.sets} × {ex.reps}{ex.isHold ? " hold" : ""} {ex.weight > 0 ? `· ${exerciseWeights[ex.id] ?? ex.weight} ${ex.unit}` : ""}
                        </div>
                      </div>
                      <a href={ex.video} target="_blank" rel="noopener noreferrer" className="video-btn">â¶</a>
                    </div>
                  ))}
                </div>
              )}
            </>
          )}
        </div>
      )}

      {/* -- Schedule Tab -- */}
      {activeTab === "schedule" && (
        <div className="fade-in" style={{ display: "flex", flexDirection: "column", gap: 12 }}>
          <div className="card" style={{ padding: 20 }}>
            <h3 style={{ fontSize: 16, fontWeight: 700, marginBottom: 4 }}>Weekly Schedule</h3>
            <p style={{ fontSize: 13, color: "#888" }}>Alternating Day A / Day B pattern for balanced training</p>
          </div>
          {SCHEDULE.map(s => {
            const w = EXERCISES[s.workout];
            const isToday = s.day === new Date().getDay();
            return (
              <div key={s.day} className="card" style={{ padding: 16, borderColor: isToday ? "#f59e0b44" : undefined }}>
                <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
                  <div>
                    <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
                      <span style={{ fontSize: 15, fontWeight: 700 }}>{s.label}</span>
                      {isToday && <span style={{ fontSize: 10, fontWeight: 700, color: "#f59e0b", background: "#f59e0b22", padding: "2px 8px", borderRadius: 4 }}>TODAY</span>}
                    </div>
                    <div style={{ fontSize: 13, color: "#888", marginTop: 2 }}>{w.name}</div>
                  </div>
                  <span style={{ fontSize: 12, color: "#666" }}>{w.exercises.length} exercises</span>
                </div>
              </div>
            );
          })}
          <div className="card" style={{ padding: 16, borderColor: new Date().getDay() === 0 ? "#f59e0b44" : undefined }}>
            <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
              <span style={{ fontSize: 15, fontWeight: 700 }}>Sunday</span>
              {new Date().getDay() === 0 && <span style={{ fontSize: 10, fontWeight: 700, color: "#f59e0b", background: "#f59e0b22", padding: "2px 8px", borderRadius: 4 }}>TODAY</span>}
            </div>
            <div style={{ fontSize: 13, color: "#888", marginTop: 2 }}>Rest Day · Recovery & Mobility</div>
          </div>
        </div>
      )}

      {/* -- Weight Tab -- */}
      {activeTab === "weight" && (
        <div className="fade-in">
          <WeightLog log={weightLog} onAdd={addWeightLog} />
        </div>
      )}

      {/* -- History Tab -- */}
      {activeTab === "history" && (
        <div className="fade-in">
          <WorkoutHistory history={workoutHistory} />
        </div>
      )}
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>
